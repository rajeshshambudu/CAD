<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Complete 3D Floor Plan</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { margin:0; overflow:hidden; background:#eee; font-family:Arial; }
#ui {
    position:fixed;
    top:10px;
    left:10px;
    background:#fff;
    padding:10px;
    border-radius:6px;
    box-shadow:0 0 10px rgba(0,0,0,.2);
}
</style>
</head>
<body>

<div id="ui">
<button onclick="topView()">Top View</button>
<button onclick="walkView()">Walk View</button>
<p id="info">Click a room</p>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.130.1/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.130.1/examples/js/controls/OrbitControls.js"></script>

<script>
// ================= BASIC SETUP =================
const scene = new THREE.Scene();
scene.background = new THREE.Color(0xf0f0f0);

const camera = new THREE.PerspectiveCamera(60, innerWidth/innerHeight, 0.1, 1000);
camera.position.set(0,25,0);
camera.lookAt(0,0,0);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth, innerHeight);
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;
controls.enableRotate = false;

// ================= LIGHTS =================
scene.add(new THREE.AmbientLight(0xffffff,0.8));
const sun = new THREE.DirectionalLight(0xffffff,0.6);
sun.position.set(10,20,10);
scene.add(sun);

// ================= MATERIALS =================
const floorMat = new THREE.MeshStandardMaterial({color:0xd8d8d8});
const wallMat  = new THREE.MeshStandardMaterial({color:0xffffff});
const doorMat  = new THREE.MeshStandardMaterial({color:0x8b5a2b});
const winMat   = new THREE.MeshStandardMaterial({color:0x87ceeb, transparent:true, opacity:.5});
const furnMat  = new THREE.MeshStandardMaterial({color:0x999999});

// ================= HELPERS =================
function box(w,h,d,x,y,z,mat,rot=0){
    const m = new THREE.Mesh(new THREE.BoxGeometry(w,h,d),mat);
    m.position.set(x,y,z);
    m.rotation.y = rot;
    scene.add(m);
    return m;
}

// ================= FLOOR =================
box(20,.2,14,0,0,0,floorMat);

// ================= WALLS =================
box(20,3,.2,0,1.5,-7,wallMat);
box(20,3,.2,0,1.5,7,wallMat);
box(14,3,.2,10,1.5,0,wallMat,Math.PI/2);
box(14,3,.2,-10,1.5,0,wallMat,Math.PI/2);

// inner
box(6,3,.2,-6,1.5,0,wallMat,Math.PI/2);
box(6,3,.2,-4,1.5,-4,wallMat);
box(6,3,.2,3,1.5,-4,wallMat);
box(4,3,.2,7,1.5,2,wallMat,Math.PI/2);
box(4,3,.2,5,1.5,4,wallMat);

// ================= DOORS =================
box(1,2,.1,-6,1,-1,doorMat);
box(1,2,.1,-2,1,-4,doorMat);
box(1,2,.1,3,1,-4,doorMat);
box(1,2,.1,6,1,4,doorMat);

// ================= WINDOWS =================
box(2,1,.1,0,2.2,-7,winMat);
box(2,1,.1,-9,2.2,0,winMat);
box(2,1,.1,9,2.2,0,winMat);

// ================= FURNITURE =================
box(3,.5,2,-6,.25,-2,furnMat);  // bed
box(2,.5,1,-2,.25,-2,furnMat);  // bed
box(3,.5,2,2,.25,2,furnMat);    // sofa
box(1.5,.8,1,6,.4,3,furnMat);   // toilet

// ================= ROOM OBJECTS (CLICKABLE) =================
const rooms = [];
function room(name,w,d,x,z){
    const r = box(w,.1,d,x,.11,z,new THREE.MeshBasicMaterial({transparent:true,opacity:0}));
    r.userData.name = name;
    rooms.push(r);
}
room("Living Room",8,6,2,2);
room("Bedroom 1",4,4,-6,-2);
room("Bedroom 2",4,4,-2,-2);
room("Kitchen",4,3,3,-5);
room("Bathroom",3,3,6,5);

// ================= RAYCAST CLICK =================
const ray = new THREE.Raycaster();
const mouse = new THREE.Vector2();

addEventListener('click',e=>{
    mouse.x = (e.clientX/innerWidth)*2-1;
    mouse.y = -(e.clientY/innerHeight)*2+1;
    ray.setFromCamera(mouse,camera);
    const hit = ray.intersectObjects(rooms);
    if(hit.length) document.getElementById("info").innerText = hit[0].object.userData.name;
});

// ================= GRID =================
scene.add(new THREE.GridHelper(30,30));

// ================= VIEW MODES =================
function topView(){
    camera.position.set(0,25,0);
    camera.lookAt(0,0,0);
    controls.enableRotate = false;
}
function walkView(){
    camera.position.set(0,2,8);
    camera.lookAt(0,2,0);
    controls.enableRotate = true;
}

// ================= LOOP =================
function animate(){
    requestAnimationFrame(animate);
    controls.update();
    renderer.render(scene,camera);
}
animate();

addEventListener('resize',()=>{
    renderer.setSize(innerWidth,innerHeight);
    camera.aspect = innerWidth/innerHeight;
    camera.updateProjectionMatrix();
});
</script>
</body>
</html>
